[{"content":"前言 我是一名 phper，由于各方面因素，决定转战 Go，PHP 基本都是用来开发 Web 项目的，所以这次就使用 Go 中最流行的 Web 框架 Gin 来进行二次封装，由于它自由度很高，没办法像 PHP 框架 Laravel 开箱即用，所以就诞生了这个系列的文章，带你一步步将基础服务封装到 Gin 中，方便以后更愉快的 CURD\n适用人群 懂得安装 Go 环境及其基本语法 会使用 Go Modules 管理项目 略微有一点点点的开发经验 目录结构 文件/目录名称 说明 app/common 公共模块（请求、响应结构体等） app/controllers 业务调度器 app/middleware 中间件 app/models 数据库结构体 app/services 业务层 bootstrap 项目启动初始化 config 配置结构体 global 全局变量 routes 路由定义 static 静态资源（允许外部访问） storage 系统日志、文件等静态资源） utils 工具函数 config.yaml 配置文件 main.go 项目启动文件 初始化项目 先在 ~/go/src 目录下创建一个目录 jassue-gin 用来存放项目代码 1 mkdir ~/go/src/jassue-gin 在项目根目录下，初始化 go.mod 文件 1 go mod init jassue-gin 安装 Gin 1 go get -u github.com/gin-gonic/gin 在项目根目录下编写 main.go 文件 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package main import ( \u0026#34;github.com/gin-gonic/gin\u0026#34; \u0026#34;net/http\u0026#34; ) func main() { r := gin.Default() // 测试路由 r.GET(\u0026#34;/ping\u0026#34;, func(c *gin.Context) { c.String(http.StatusOK, \u0026#34;pong\u0026#34;) }) // 启动服务器 r.Run(\u0026#34;:8080\u0026#34;) } 启动应用 \u0026amp; 测试 执行 go run main.go 启动应用\n可以看到 HTTP 服务器启动成功，打开 http://127.0.0.1:8080/ping 测试路由\n","date":"2023-06-16T00:00:00Z","image":"https://vmaki.com/p/go/go-gin_hu7326706ede53bd609b6cba7a608635bb_27174_120x120_fill_q75_h2_box_smart1_2.webp","permalink":"https://vmaki.com/p/go/","title":"封装属于你的Gin框架（一）：开篇 \u0026 项目初始化"},{"content":"有话要说 博客系统基于 Hugo-Extended，版本：0.113.0 博客主题来自 Stack，版本：3.16.0\n最早在V2EX了解到这个主题，表示是我喜欢的风格，但无奈中间因为没有时间去折腾博客，也就一直就拖到了现在。 这篇文章仅是为了记录一下博客装修内容，在自己的审美之上，进行的一些修改。\n折腾须知 最好根据作者为我们预留的文件，来添加自定义样式以及 Header / Footer，以避免更新主题时可能会出现的错误。\nthemes/stack/assets/scss/custom.scss themes/stack/layouts/partials/head/custom.html themes/stack/layouts/partials/footer/custom.html 如果你使用的是Hugo module的安装方式，你需要将你修改的文件复制到根目录下的相对应的文件夹。\n官方说明：\nUsing this method, there won\u0026rsquo;t be any file under themes directory. In order to modify the theme, you will have to copy the file you want to modify to the same directory under layouts directory.For example, in order to modify the themes/hugo-theme-stack/layouts/partials/header.html file, you will have to copy it to layouts/partials/header.html and modify it there (copy the code from theme\u0026rsquo;s repository). The same applies to assets and static directories.\n调整内容 增加页面顶部加载条 增加返回顶部按钮 删除分类页面的文章图片和遮罩 修改代码高亮以及增加MacOS圆点样式 修改滚动条的样式 修改友情链接为三栏 修改代码块、下拉菜单等圆角 修改页面间距和文章内容的间距 修改键盘标签样式；CTRL + C 代码高亮 因为主题默认没有开启代码高亮，可以在Chroma Playground挑选高亮主题，修改根目录下config.yaml文件中的highlight部分来开启代码高亮。\n1 2 3 4 5 6 7 8 9 highlight: style: onedark noClasses: true codeFences: true guessSyntax: true lineNoStart: 1 lineNos: true lineNumbersInTable: false tabWidth: 4 以下为对代码高亮的其他调整：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 /* themes/stack/assets/scss/custom.scss 代码高亮的行数设置为不可选 */ .chroma .lnt, .chroma .line .ln { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } /* ----------------------------------------------- */ /* themes/stack/assets/scss/custom.scss 代码高亮 MacOS 圆点样式 */ .highlight:before { content: \u0026#34;\u0026#34;; display: block; background: url(/code-header.svg); height: 30px; width: 100%; background-size: 45px; background-repeat: no-repeat; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px; position: absolute; top: 0; left: 0; } /* ----------------------------------------------- */ /* themes/stack/assets/scss/custom.scss highlight 间距调整 */ .article-content .highlight { padding-left: 15px; padding-bottom: 15px; } /* themes/stack/assets/scss/variables.scss:160 代码块背景色调整*/ [data-scheme=\u0026#34;light\u0026#34;] { --pre-text-color: #f8f8f2; --pre-background-color: #282c34; @import \u0026#34;partials/highlight/light.scss\u0026#34;; } [data-scheme=\u0026#34;dark\u0026#34;] { --pre-text-color: #f8f8f2; --pre-background-color: #282c34; @import \u0026#34;partials/highlight/dark.scss\u0026#34;; } 增加样式 修改路径：themes\\stack\\layouts\\partials\\footer\\custom.html\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 \u0026lt;!-- ----------------------------------------------- --\u0026gt; \u0026lt;!-- 加载条 --\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/nprogress.min.js\u0026#34; integrity=\u0026#34;sha384-bHDlAEUFxsRI7JfULv3DTpL2IXbbgn4JHQJibgo5iiXSK6Iu8muwqHANhun74Cqg\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/css/nprogress.css\u0026#34; integrity=\u0026#34;sha384-KJyhr2syt5+4M9Pz5dipCvTrtvOmLk/olWVdfhAp858UCa64Ia5GFpTN7+G4BWpE\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; /\u0026gt; \u0026lt;script\u0026gt; NProgress.start(); document.addEventListener(\u0026#34;readystatechange\u0026#34;, () =\u0026gt; { if (document.readyState === \u0026#34;interactive\u0026#34;) NProgress.inc(0.8); if (document.readyState === \u0026#34;complete\u0026#34;) NProgress.done(); }); \u0026lt;/script\u0026gt; \u0026lt;!-- ----------------------------------------------- --\u0026gt; \u0026lt;!--返回顶部按钮 --\u0026gt; \u0026lt;a href=\u0026#34;#\u0026#34; id=\u0026#34;back-to-top\u0026#34; title=\u0026#34;返回顶部\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;!--返回顶部CSS --\u0026gt; \u0026lt;style\u0026gt; #back-to-top { display: none; position: fixed; bottom: 20px; right: 55px; width: 55px; height: 55px; border-radius: 7px; background-color: var(--back-to-top-background); box-shadow: var(--shadow-l2); font-size: 30px; text-align: center; line-height: 50px; cursor: pointer; } #back-to-top:before { content: \u0026#34; \u0026#34;; display: inline-block; position: relative; top: 0; transform: rotate(135deg); height: 10px; width: 10px; border-width: 0 0 2px 2px; border-color: var(--back-to-top-color); border-style: solid; } #back-to-top:hover:before { border-color: #2674e0; } /* 在屏幕宽度小于 768 像素时，钮位置调整 */ @media screen and (max-width: 768px) { #back-to-top { bottom: 20px; right: 20px; width: 40px; height: 40px; font-size: 10px; } } /* 在屏幕宽度大于等于 1024 像素时，按钮位置调整 */ @media screen and (min-width: 1024px) { #back-to-top { bottom: 20px; right: 40px; } } /* 在屏幕宽度大于等于 1280 像素时，按钮位置调整 */ @media screen and (min-width: 1280px) { #back-to-top { bottom: 20px; right: 55px; } } /* 目录显示时，隐藏按钮 */ @media screen and (min-width: 1536px) { #back-to-top { visibility: hidden; } } \u0026lt;/style\u0026gt; \u0026lt;!--返回顶部JS --\u0026gt; \u0026lt;script\u0026gt; function backToTop() { document.documentElement.scrollIntoView({ behavior: \u0026#34;smooth\u0026#34;, }); } window.onload = function () { let scrollTop = this.document.documentElement.scrollTop || this.document.body.scrollTop; let totopBtn = this.document.getElementById(\u0026#34;back-to-top\u0026#34;); if (scrollTop \u0026gt; 0) { totopBtn.style.display = \u0026#34;inline\u0026#34;; } else { totopBtn.style.display = \u0026#34;none\u0026#34;; } }; window.onscroll = function () { let scrollTop = this.document.documentElement.scrollTop || this.document.body.scrollTop; let totopBtn = this.document.getElementById(\u0026#34;back-to-top\u0026#34;); if (scrollTop \u0026lt; 200) { totopBtn.style.display = \u0026#34;none\u0026#34;; } else { totopBtn.style.display = \u0026#34;inline\u0026#34;; totopBtn.addEventListener(\u0026#34;click\u0026#34;, backToTop, false); } }; \u0026lt;/script\u0026gt; 全部调整 修改路径：themes\\stack\\assets\\scss\\custom.scss\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 /* Place your custom SCSS in HUGO_SITE_FOLDER/assets/scss/custom.scss */ /* ----------------------------------------------- */ /* 定义滚动条的宽度、高度和颜色 */ ::-webkit-scrollbar { width: 6px; height: 6px; } /* 定义滚动条滑块的样式 */ ::-webkit-scrollbar-thumb { background-color: #aaaaaa; border-radius: 5px; } /* ----------------------------------------------- */ /* 引用，代码块等不贴合文章边缘 */ .article-page { blockquote, figure, .highlight, pre, .gallery, .video-wrapper, .table-wrapper, .s_video_simple { margin-left: 0; margin-right: 0; width: 100%; } } /* ----------------------------------------------- */ /* 代码块，图片圆角样式 */ .highlight, pre, .gallery img { border-radius: 5px; } /* ----------------------------------------------- */ /* 头像圆角样式 */ .site-avatar { .site-logo { border-radius: 7%; } } /* ----------------------------------------------- */ /* 下拉菜单圆角样式 */ .menu { padding-left: 0; list-style: none; flex-direction: column; overflow-y: auto; flex-grow: 1; font-size: 1.59rem; background-color: var(--card-background); box-shadow: var(--shadow-l2); display: none; margin: 0; border-radius: 10px; padding: 30px 30px; @include respond(xl) { padding: 15px 0; } \u0026amp;, .menu-bottom-section { gap: 30px; @include respond(xl) { gap: 25px; } } \u0026amp;.show { display: flex; } @include respond(md) { align-items: flex-end; display: flex; background-color: transparent; padding: 0; box-shadow: none; margin: 0; } li { position: relative; vertical-align: middle; padding: 0; @include respond(md) { width: 100%; } svg { stroke-width: 1.33; width: 20px; height: 20px; } a { height: 100%; display: inline-flex; align-items: center; color: var(--body-text-color); gap: var(--menu-icon-separation); } span { flex: 1; } \u0026amp;.current { a { color: var(--accent-color); font-weight: bold; } } } } /* ----------------------------------------------- */ /* 页面间距调整 */ .container { margin-left: auto; margin-right: auto; .left-sidebar { order: -3; max-width: var(--left-sidebar-max-width); } .right-sidebar { order: -1; max-width: var(--right-sidebar-max-width); /// Display right sidebar when min-width: lg @include respond(xl) { display: flex; } } \u0026amp;.extended { @include respond(md) { max-width: 768px; --left-sidebar-max-width: 25%; --right-sidebar-max-width: 30%; } @include respond(lg) { max-width: 1024px; --left-sidebar-max-width: 20%; --right-sidebar-max-width: 30%; } @include respond(xl) { max-width: 1280px; --left-sidebar-max-width: 15%; --right-sidebar-max-width: 25%; } } \u0026amp;.compact { @include respond(md) { --left-sidebar-max-width: 25%; max-width: 768px; } @include respond(lg) { max-width: 1024px; --left-sidebar-max-width: 20%; } @include respond(xl) { max-width: 1280px; } } } /* ----------------------------------------------- */ /* 友情链接修改为三栏 */ @media (min-width: 1024px) { .article-list--compact.links { display: grid; grid-template-columns: 1fr 1fr 1fr; background: none; box-shadow: none; gap: 1rem; article { background: var(--card-background); border: none; box-shadow: var(--shadow-l2); margin-bottom: 8px; border-radius: var(--card-border-radius); \u0026amp;:nth-child(odd) { margin-right: 8px; } } } } /* ----------------------------------------------- */ /* 修复引用块内容 */ a { word-break: break-all; } code { word-break: break-all; } /* ----------------------------------------------- */ /* 文章列表封面图尺寸修改 */ .article-list .article-image { img { width: 100%; height: 100px !important; object-fit: cover; @include respond(md) { height: 200px !important; } @include respond(xl) { height: 200px !important; } } } /* ----------------------------------------------- */ /* 分类页面隐藏文章图片 */ .article-list--compact \u0026gt; article .article-image img, .section-card .section-image img { display: none; } /* themes\\stack\\layouts\\partials\\article\\components\\links.html:19 add \u0026#34;id=\u0026#34;link-img\u0026#34; */ #link-img img { display: block !important; } /* ----------------------------------------------- */ /* 取消分类图片的渐变色 */ .subsection-list .article-list--tile .has-image .article-details { background: linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 0%) !important; } /* ----------------------------------------------- */ /* 代码高亮的行数设置为不可选 */ .chroma .lnt { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } /* ----------------------------------------------- */ /* highlight 间距调整 */ .article-content .highlight { padding-left: 15px; padding-bottom: 15px; } /* ----------------------------------------------- */ /* 代码高亮 MacOS 圆点样式 */ .highlight:before { content: \u0026#34;\u0026#34;; display: block; background: url(/code-header.svg); height: 30px; width: 100%; background-size: 45px; background-repeat: no-repeat; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px; position: absolute; top: 0; left: 0; } /* ----------------------------------------------- */ /* 键盘标签样式 */ kbd { margin: 0 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: #242729; background: #fff; border: 1px solid #adb3b9; border-radius: 3px; box-shadow: 0px 1px 0 rgba(12, 13, 14, 0.2), 0 0 0 2px #fff inset; white-space: nowrap; vertical-align: middle; font-family: monospace; } /* ----------------------------------------------- */ /* 背景图片 themes\\stack\\layouts\\_default\\baseof.html:7 add \u0026#34;bg\u0026#34; */ .bg { background-image: url(/bg.svg); background-position: 50%; background-size: cover; background-attachment: fixed; } /* ----------------------------------------------- */ /* 返回顶部按钮对暗色模式下适应 */ :root { --back-to-top-background: #ffffff; --back-to-top-color: #000000; \u0026amp;[data-scheme=\u0026#34;dark\u0026#34;] { --back-to-top-background: #252525; --back-to-top-color: #ffffff; } } ","date":"2023-04-21T00:00:00Z","image":"https://vmaki.com/p/stack/stack_hu023d8a42f6586e15b2d5dc47b30355ae_19366_120x120_fill_q75_h2_box_smart1_2.webp","permalink":"https://vmaki.com/p/stack/","title":"Hugo Stack 主题折腾笔记"}]